{"version":3,"file":"naive.js","sources":["../../src/utils.js","../../src/dom.js","../../src/vdom/diff.js","../../src/vdom/patch.js","../../src/vdom/vtext.js","../../src/vdom/utils.js","../../src/vdom/vnode.js","../../src/vdom/h.js","../../src/main.js"],"sourcesContent":["export function warn (message) {\n  if (window.console) {\n    console.warn(`[naive] ${message}`);\n  }\n}\n\nexport const isArray = Array.isArray ? Array.isArray : function isArray (obj) {\n  return Object.prototype.toString.call(obj) === '[object Array]';\n};\n\nexport function isUndefined (obj) {\n  return typeof obj === 'undefined';\n}\n","import { isUndefined } from './utils';\n\n/**\n * 获取元素\n *\n * IE 8 只支持到 CSS2 选择器\n *\n * @param {String} selector\n */\nexport function getElement(selector) {\n  return typeof selector === 'string' ? query(selector) : selector;\n}\n\nexport function createElement(tag) {\n  return document.createElement(tag);\n}\n\nexport function createTextNode (text) {\n  return document.createTextNode(text);\n}\n\nexport function createDocumentFragment () {\n  return document.createDocumentFragment();\n}\n\nexport function query(selector, context) {\n  context = context || document;\n  return context.querySelector(selector);\n}\n\n/**\n * 检查一个元素是否在 document 内\n */\nexport function inDoc(node) {\n  var doc = node.ownerDocument.documentElement;\n  return doc === node || node && node.nodeType === 1 && doc.contains(node);\n}\n\nexport function removeNode(node) {\n  node.parentNode.removeChild(node)\n}\n\nexport function createAnchor(name) {\n  var n = document.createTextNode('');\n  n.name = name;\n  return n;\n}\n\nexport function before(newNode, node) {\n  node.parentNode.insertBefore(newNode, node);\n}\n\nexport function replaceNode(newNode, node) {\n  node.parentNode.replaceChild(newNode, node);\n}\n\nexport function after(el, target) {\n  if (target.nextSibling) {\n    before(el, target.nextSibling)\n  } else {\n    target.parentNode.appendChild(el)\n  }\n}\n\nexport function hasAttr(node, name) {\n  return node.hasAttribute(name);\n}\n\nexport function removeAttr(node, name) {\n  node.removeAttribute(name);\n}\n\nexport function removeAllChildren(node) {\n  while(node.childNodes.length > 0) {\n    node.removeChild(node.childNodes[0]);\n  }\n}\n\n\nconst classSplitReg = /\\s+/;\n\nconst supportClassList = !isUndefined(document.createElement('div').classList);\n\nlet getClasses = supportClassList ?\n  function(element) {\n    return Array.prototype.slice.call(element.classList);\n  }\n  :\n  function(element) {\n    return element.className.split(/\\s+/).filter(s => s);\n  };\n\nexport let hasClass = supportClassList ?\n  function(element, classes) {\n    classes = classes.split(/\\s+/).filter(s => s);\n    var contains = true;\n    for (let i = 0; i < classes.length; ++i) {\n      if (!element.classList.contains(classes[i])) {\n        contains = false;\n        break;\n      }\n    }\n    return contains;\n  }\n  :\n  function(element, classes) {\n    classes = classes.split(/\\s+/).filter(s => s);\n    var contains = true, tmp = element.className;\n    for (let i = 0; i < classes.length; ++i) {\n      if (tmp.indexOf(classes[i]) === -1) {\n        contains = false;\n        break;\n      }\n    }\n    return contains;\n  };\n\nexport let addClass = supportClassList ?\n  function(element, classes) {\n    classes = classes.split(/\\s+/).filter(s => s);\n    element.classList.add.apply(element.classList, classes);\n    return element;\n  }\n  :\n  function(element, classes) {\n    var tmp = element.className;\n    classes = classes.split(/\\s+/).filter(s => s);\n    classes.forEach(c => {\n      if (!hasClass(element, c)) {\n        tmp = tmp.replace(/\\s+|$/, ' ' + classes);\n      }\n    });\n    element.className = tmp;\n    return element;\n  };\n\nexport let removeClass = supportClassList ?\n  function(element, classes) {\n    classes = classes.split(/\\s+/).filter(s => s);\n    element.classList.remove.apply(element.classList, classes);\n    return element;\n  }\n  :\n  function(element, classes) {\n    var tmp = element.className;\n    classes = classes.split(/\\s+/).filter(s => s);\n    classes.forEach(c => {\n      if (hasClass(element, c)) {\n        tmp = tmp.replace(new RegExp(c, 'g'), '');\n      }\n    });\n    element.className = tmp;\n    return element;\n  };\n\nexport let toggleClass = supportClassList ?\n  function(element, classes, force) {\n    classes = classes.split(/\\s+/).filter(s => s);\n    classes.forEach(c => {\n      element.classList.toggle(c, force);\n    });\n    return element;\n  }\n  :\n  function(element, classes, force) {\n    classes = classes.split(/\\s+/).filter(s => s);\n    var useForce = force !== undefined;\n    classes.forEach(c => {\n      if (hasClass(element, c) && (useForce && !force || !useForce)) {\n        removeClass(element, c);\n      } else if (!hasClass(element, c) && (useForce && force || !useForce)) {\n        addClass(element, c);\n      }\n    });\n    return element;\n  };\n","export function diff (oldTree, newTree) {\n  var index = 0;\n  var patches = {};\n  diffWalk(oldTree, newTree, index, patches);\n  return patches;\n}\n\nfunction diffWalk (oldTree, newTree, index, patches) {\n  var currentPatches = [];\n  if (oldTree.tagName === newTree.tagName) {\n    var propsPatches = diffProps(oldTree, newTree);\n    if (propsPatches) {\n      currentPatches.push({type: 'props', props: propsPatches});\n    }\n  } else {\n    currentPatches.push({type: 'replace', node: newTree});\n  }\n  patches[index] = currentPatches;\n}\n\nfunction diffProps (oldTree, newTree) {\n  var oldTreeProps = oldTree.props;\n  var newTreeProps = newTree.props;\n  var propsPatches = {}, count = 0;\n  for (var p in oldTreeProps) {\n    if (!newTreeProps.hasOwnProperty(p) || newTreeProps[p] !== oldTreeProps[p]) {\n      propsPatches[p] = newTreeProps[p];\n      count += 1;\n    }\n  }\n  if (count <= 0) {\n    return null;\n  }\n  return propsPatches;\n}\n","var REPLACE = 0;\nvar REORDER = 1;\nvar PROPS = 2;\nvar TEXT = 3;\n\n// 根据补丁更新 DOM 节点\nexport function applyPatch (domNode, patches) {}\n","import { createTextNode } from '../dom';\n\n// virtual text node\nexport default function VText (text) {\n  this.data = text;\n}\n\nVText.prototype.render = function vdom2dom () {\n  return createTextNode(this.data);\n};\n","import VText from './vtext';\nimport VNode from './vnode';\n\nexport function isVNode (node) {\n  return node instanceof VNode;\n}\n\nexport function isVText (node) {\n  return node instanceof VText;\n}\n","import { createElement } from '../dom';\nimport VText from './vtext';\nimport { isVNode, isVText } from './utils';\n\nexport default function VNode (tagName, props, children, key) {\n  this.tagName = tagName;\n  this.props = props || {};\n  this.key = key ? String(key) : undefined; // key 用来标识节点，方便 diff\n  const childNodes = [];\n  children = children || [];\n  for (let i = 0; i < children.length; ++i) {\n    const child = children[i];\n    if (isVNode(child) || isVText(child)) {\n      childNodes.push(child);\n    } else if (typeof child === 'string') {\n      childNodes.push(new VText(child));\n    } else {\n      // error\n    }\n  }\n  this.children = childNodes;\n}\n\nVNode.prototype.render = function vdom2dom() {\n  const el = createElement(this.tagName);\n  const props = this.props;\n  for (let p in props) {\n    el.setAttribute(p, props[p]);\n  }\n  for (let i = 0; i < this.children.length; ++i) {\n    el.appendChild(this.children[i].render());\n  }\n  return el;\n};\n","import VNode from './vnode';\n\nexport default function h (tagName, props, children) {\n  return new VNode(tagName, props, children);\n}\n","import { getElement, createElement, removeNode, createTextNode, createDocumentFragment } from './dom';\nimport { diff, applyPatch } from './vdom/vdom';\nimport h from './vdom/h';\nimport { isArray } from './utils';\n\nfunction defaultRender () {\n  return h('component', [], []);\n}\n\nexport default function Naive (options) {\n  this._hooks = {};\n  this._methods = {};\n  this._store = options.store || null;\n  this._render = options.render || defaultRender; // render virtual-dom\n  this._vdom = this._render(h, this.getState());\n  this.$el = null;\n  this._mounted = false;\n}\n\nconst prtt = Naive.prototype;\n\nprtt.getState = function getState () {\n  return this._store ? this._store.getState() : this._state;\n};\n\nprtt.test = function test () {\n  const vdom = this._render(h, this.getState());\n  if (vdom.length) {\n    var docFragment = createDocumentFragment();\n    for (let i = 0; i < vdom.length; ++i) {\n      docFragment.appendChild(typeof vdom[i] === 'string' ? createTextNode(vdom[i]) : vdom[i].render());\n    }\n    document.body.appendChild(docFragment);\n  } else {\n    document.body.appendChild(vdom.render());\n  }\n  return this;\n};\n\nprtt.render = function render () {\n  const _vdom = this._render(h, this.getState());\n  const patches = diff(_vdom, this._vdom);\n  applyPatch(patches);\n};\n\nprtt._init = function () {};\n\nprtt.$mount = function (selector, replace = true) {\n  this.$el = getElement(selector) || createElement('div');\n  const _dom = this._render(h).render();\n  this.$el.appendChild(_dom);\n  this._callHooks('ready');\n};\n\nprtt.$unmount = function () {\n  removeNode(this.$el);\n  this.$el = null;\n};\n\nprtt._callHooks = function callHooks (hookName) {\n  const _callbacks = this._hooks[hookName] || [];\n  for (let i = 0; i < _callbacks.length; ++i) {\n    _callbacks[i].call(this);\n  }\n};\n\nprtt._addHook = function addHook (hookName, callback) {\n  let callbacks = this._hooks[hookName];\n  if (!callbacks) {\n    callbacks = [];\n  }\n  if (isArray(callback)) {\n    callbacks = callbacks.concat(callback);\n  } else {\n    callbacks.push(callback);\n  }\n  this._hooks[hookName] = callbacks;\n};\n\nprtt._removeHook = function removeHook (hookName, callback) {\n  const callbacks = this._hooks[hookName];\n  if (!callbacks || callbacks.length === 0) {\n    return this;\n  }\n  if (!callback) {\n    callbacks.splice(0, callbacks.length);\n  } else {\n    for (let i = 0; i < callbacks.length; ++i) {\n      if (callbacks[i] === callback) {\n        callbacks.splice(i, 1);\n        break;\n      }\n    }\n  }\n  return this;\n};\n\nprtt.$dispatch = function $dispatch (action) {};\n\nconst _templateHelpers = {\n  each(list) {\n    let hList = [];\n    for (let i = 0; i < list.length; ++i) {\n      hList.push(h(list[i]));\n    }\n    return hList;\n  },\n  if(condition, vdom) {\n    return condition ? h(vdom) : false;\n  },\n  _() {}\n};\n\n// 组件\nNaive.Component = function NaiveComponent (options) {\n  var naive = new Naive({\n    state: options.state,\n    store: options.stote,\n    render: function render (h, state) {\n      return options.render(h, _templateHelpers, state);\n    }\n  });\n  return naive;\n};\n"],"names":["isArray","Array","obj","Object","prototype","toString","call","getElement","selector","query","createElement","tag","document","createTextNode","text","createDocumentFragment","context","querySelector","removeNode","node","parentNode","removeChild","diff","oldTree","newTree","index","patches","diffWalk","currentPatches","tagName","propsPatches","diffProps","push","type","props","oldTreeProps","newTreeProps","count","p","hasOwnProperty","applyPatch","domNode","VText","data","render","vdom2dom","isVNode","VNode","isVText","children","key","String","undefined","childNodes","i","length","child","el","setAttribute","appendChild","h","defaultRender","Naive","options","_hooks","_methods","_store","store","_render","_vdom","getState","$el","_mounted","prtt","_state","test","vdom","docFragment","body","_init","$mount","replace","_dom","_callHooks","$unmount","callHooks","hookName","_callbacks","_addHook","addHook","callback","callbacks","concat","_removeHook","removeHook","splice","$dispatch","action","_templateHelpers","list","hList","condition","Component","NaiveComponent","naive","state","stote"],"mappings":"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"}